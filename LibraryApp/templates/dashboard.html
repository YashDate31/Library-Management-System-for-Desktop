{% extends "base.html" %}

{% block content %}
<nav class="dashboard-header">
    <div class="brand">Library<span style="color: var(--text-main); font-weight: 400;">Connect</span></div>
    <a href="{{ url_for('logout') }}" class="logout-btn">Sign Out</a>
</nav>

<div class="container animate-fade-in">
    <!-- Profile Section -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Student Profile</h3>
        </div>
        <div class="profile-grid">
            <div class="profile-item">
                <div class="label">Name</div>
                <div class="value">{{ student['name'] }}</div>
            </div>
            <div class="profile-item">
                <div class="label">Enrollment No</div>
                <div class="value">{{ student['enrollment_no'] }}</div>
            </div>
            <div class="profile-item">
                <div class="label">Department</div>
                <div class="value">{{ student['department'] }}</div>
            </div>
            <div class="profile-item">
                <div class="label">Year</div>
                <div class="value">{{ student['year'] }}</div>
            </div>
        </div>
    </div>

    <!-- Active Borrows -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Current Books</h3>
            <span class="status-badge safe">{{ current_borrows|length }} Active</span>
        </div>
        
        {% if current_borrows %}
            <div class="books-list">
                {% for book in current_borrows %}
                    <div class="book-item">
                        <div class="book-info">
                            <h4>{{ book['title'] }}</h4>
                            <p>{{ book['author'] }}</p>
                        </div>
                        <div class="book-meta">
                            <!-- Logic to determine due status color could go here -->
                            <div class="status-badge due-soon">
                                Due: {{ book['due_date'] }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                <p>No books currently borrowed.</p>
            </div>
        {% endif %}
    </div>

    <!-- History Timeline -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Reading History</h3>
        </div>
        
        {% if history %}
            <div class="timeline">
                {% for book in history %}
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="date">Returned on {{ book['return_date'] }}</div>
                            <h4 style="font-size: 1rem; margin-bottom: 0.25rem;">{{ book['title'] }}</h4>
                            <p style="font-size: 0.85rem; color: var(--text-muted);">by {{ book['author'] }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                <p>No history available.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
